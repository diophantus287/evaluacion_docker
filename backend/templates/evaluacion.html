<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Evaluación del {{ prof }}</title>
<style>
body { font-family: Arial, sans-serif; padding: 20px; background: #f6f6f6; }
h1, h2 { text-align: center; color: #333; }
table {
  width: 40%;
  border-collapse: collapse;
  table-layout: auto;
  margin: 0 auto; /* CENTRA LA TABLA */
}
th, td {
  border: 1px solid #ccc;
  padding: 6px;
  vertical-align: top;
}
td:first-child {
  width: 60%; /* más ancho para textos largos */
}
.alumnos { margin-top: 20px; }
#pruebas-container {
  background: #ffffff;
  border-radius: 12px;
  box-shadow: 0 2px 8px rgba(0,0,0,0.1);
  padding: 20px;
  margin-top: 20px;
  text-align: left;
}
.lista-pruebas { margin-bottom: 15px; }
.prueba-item {
  display: flex;
  justify-content: space-between;
  align-items: center;
  background: #f9f9f9;
  border: 1px solid #ddd;
  padding: 8px 12px;
  border-radius: 8px;
  margin-bottom: 5px;
}
.prueba-item a {
  text-decoration: none;
  color: #007BFF;
}
.prueba-item a:hover { text-decoration: underline; }
.crear-prueba { text-align: center; margin-top: 10px; }
.crear-prueba a { font-weight: bold; color: #007BFF; text-decoration: none; }
.crear-prueba a:hover { text-decoration: underline; }
.modificar-pesos { text-align: center; margin-top: 10px; }
.modificar-pesos button {
  padding: 10px 20px;
  background: #28a745;
  color: white;
  border: none;
  border-radius: 8px;
  cursor: pointer;
}
.modificar-pesos button:hover { background: #218838; }
</style>
</head>
<body>

<h2>Evaluación del {{ prof }}</h2>

{% if mensaje %}
  <p style="margin-top:20px;font-weight:bold;">
    {{ mensaje }}
    <a href="{{ url_for('criterios.pesos') }}">Crear ahora</a>
  </p>

{% else %}

  <h2>Pesos seleccionados de criterios</h2>

  {% if lista_criterios %}
  <table>
    <tr>
      <th>Criterio</th>
      <th>Peso</th>
    </tr>

    {% for c, p in lista_criterios %}
    <tr>
      <td>{{ c }}</td>
      <td>{{ p }}</td>
    </tr>
    {% endfor %}
  </table>

  {% else %}
    <p>No hay criterios definidos.</p>
  {% endif %}

  <div class="modificar-pesos">
    <a href="{{ url_for('criterios.pesos') }}">
      <button type="button">Modificar pesos</button>
    </a>
  </div>

{% endif %}

<!-- Selección de alumno -->
<h2>Alumnos</h2>
{% if alumnos %}
  <form method="get" action="#">
    <select name="alumno">
      {% for a in alumnos %}
        <option>{{ a }}</option>
      {% endfor %}
    </select>
    <button type="submit">Ver</button>
  </form>
  <div class="modificar-alumnos" style="text-align:center; margin-top:10px;">
  <a href="{{ url_for('alumnos.alumnos') }}">
    <button type="button">Modificar alumnos</button>
  </a>
</div>

{% else %}
  <p>No tienes estudiantes para evaluar,
     <a href="{{ url_for('alumnos.alumnos', prof=prof) }}">añádelos</a>.
  </p>
{% endif %}

<hr>

<!-- BLOQUE DE PRUEBAS EVALUABLES -->
<div id="pruebas-container">
  <h2>Pruebas evaluables</h2>
  {% if pruebas and pruebas|length > 0 %}
    <div class="lista-pruebas">
      {% for id, nombre in pruebas %}
        <div class="prueba-item">
          <span>{{ nombre }}</span>
          <a href="{{ url_for('pruebas.ver_prueba', prueba_id=id) }}">Ver</a>
        </div>
      {% endfor %}
    </div>
  {% else %}
    <p>No tienes pruebas evaluables todavía.</p>
  {% endif %}
  <div class="crear-prueba">
    <a href="{{ url_for('pruebas.crear_prueba', prof=prof) }}">➕ Crear nueva prueba evaluable</a>
  </div>
</div>


</body>
</html>
